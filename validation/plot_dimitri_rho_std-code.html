<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Tue Jul  2 12:51:08 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>plot_dimitri_rho_std.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="plot_dimitri_rho_std.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">PRO PLOT_DIMITRI_RHO_STD

<span class="comments">; NOTE, NEED TO HAVE COMPILE DIMITRI ROUTINES FOR THIS TO WORK, </span>
<span class="comments">; AND IT'S ECPECTING YOU TO BE IN THE SOURCE DIRECTORY</span>

<span class="comments">; DEFINE SITE, SENSORS AND PROC VERSIONS TO SEARCH FOR</span>

  SITES     = ['Amazon','BOUSSOLE','DomeC','Libya4','SIO','SPG','TuzGolu','Uyuni']
  SENSORS   = ['PARASOL','AATSR','ATSR2','MERIS','MERIS','MODISA']
  PROCVERS  = ['Calibration_1','2nd_Reprocessing','Reprocessing_2008','2nd_Reprocessing','3rd_Reprocessing','Collection_5']
  COLOURS   = [0,70,120,160,200,254]
  IFOLDER   = GET_DIMITRI_LOCATION('INPUT')
  oFOLDER   = GET_DIMITRI_LOCATION('OUTPUT')
  DL        = GET_DIMITRI_LOCATION('DL')
  num_non_refs = 5+12

<span class="comments">; DEFINE PLOT BASICS</span>

  YRANGE    = [0.,.5]
  XRANGE    = [0.,1.]
  XTITLE    = 'TOA RHO (665nm)'
  YTITLE    = 'TOA STDEV (665nm)'
  LINESTYLE = -1
  PSYM      = 3
  PLOT_BASE = '_TOA_RHO_STDEV.jpg'

  LOADCT,39
  DEVICE, DECOMPOSED = 0

<span class="comments">; LOOP OVER EACH SITE</span>

  FOR ISITE = 0,N_ELEMENTS(SITES)-1 DO BEGIN

<span class="comments">; CREATE A PLOT BASE</span>

  counter=0
  PLOT, [0.],[0.],/NODATA,COLOR = 0, BACKGROUND = 255,$
    XRANGE = XRANGE, YRANGE = YRANGE,$
    XTITLE = XTITLE, YTITLE = YTITLE

<span class="comments">;-----------------------------------------</span>
<span class="comments">; RETRIEVE THE SITE TYPE</span>

  SITE_TYPE = GET_SITE_TYPE(sites[isite])

<span class="comments">;LOOP OVER EACH SENSOR</span>

    for isensor = 0,N_elements(sensors)-1 do begin

<span class="comments">;IF DATA PRESENT FIND INDEX OF 665NM BAND AND GET DATA INDEXES ABOVE 0</span>

      ifile = ifolder+'Site_'+sites[isite]+dl+sensors[isensor]+dl+'Proc_'+procvers[isensor]+dl+sensors[isensor]+'_TOA_REF.dat'
      if file_test(ifile) eq 0 then continue

      IF sensors[isensor] EQ 'MODISA' THEN BEGIN
        IF STRUPCASE(SITE_TYPE) EQ 'OCEAN' THEN TEMP_SENS = 'MODISA_O' ELSE TEMP_SENS = 'MODISA_L'
      ENDIF ELSE TEMP_SENS = sensors[isensor]
      
      BID = GET_SENSOR_BAND_INDEX(TEMP_SENS,9)
      if bid lt 0 then continue

<span class="comments">;OPLOT DATA ONTO PLOT</span>

      restore,ifile
      tmp_dims = size(sensor_l1b_ref)
      nb_bands = (tmp_dims[1]-num_non_refs)/2
      
      rho = sensor_l1b_ref(num_non_refs+bid,*)
      std = sensor_l1b_ref(num_non_refs+nb_bands+bid,*)

      idx = where(rho gt 0.0,count)
      if count eq 0 then continue
      
      oplot,rho[idx],std[idx],color=colours[isensor],linestyle=linestyle,psym=psym
      xyouts,0.85,0.9-counter*0.035,string(strmid(sensors[isensor],0,3)+'_'+strmid(procvers[isensor],0,3)),color=colours[isensor],/normal
      counter++

<span class="comments">;ENDLOOP ON SENSORS</span>

    endfor

<span class="comments">;SAVE PLOT</span>

    image = tvrd(/true)
    write_jpeg,oFOLDER+sites[isite]+PLOT_BASE,image,/true

<span class="comments">;ENDLOOP ON SITES</span>
  
  endfor
  wdelete

end
</code>
    </div>
  </body>
</html>