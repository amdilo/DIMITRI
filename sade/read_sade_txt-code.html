<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Thu Jul  4 16:01:54 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>read_sade_txt.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="read_sade_txt.pro (Documentation for /home/marrabld/projects/DIMITRI_2.0/Source/)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;**************************************************************************************</span>
<span class="comments">;**************************************************************************************</span>
<span class="comments">;*</span>
<span class="comments">;* NAME:</span>
<span class="comments">;*      READ_SADE_TXT       </span>
<span class="comments">;* </span>
<span class="comments">;* PURPOSE:</span>
<span class="comments">;*      READS THE SADE TEXT FILES AND RETURNS THE VALUES</span>
<span class="comments">;* </span>
<span class="comments">;* CALLING SEQUENCE:</span>
<span class="comments">;*      RES = READ_SADE_TXT(SADEFILE,SENSOR)   </span>
<span class="comments">;* </span>
<span class="comments">;* INPUTS:</span>
<span class="comments">;*      SADEFILE  - THE FULL PATH OF THE SADE FILE</span>
<span class="comments">;*      SENSOR    - THE SENSOR NAME  </span>
<span class="comments">;*</span>
<span class="comments">;* KEYWORDS:</span>
<span class="comments">;*</span>
<span class="comments">;* OUTPUTS:</span>
<span class="comments">;*      SADEDATA - THE SADE DATA INFORMATION</span>
<span class="comments">;*</span>
<span class="comments">;* COMMON BLOCKS:</span>
<span class="comments">;*      NONE</span>
<span class="comments">;*</span>
<span class="comments">;* MODIFICATION HISTORY:</span>
<span class="comments">;*      16 DEC 2011 - C KENT  - INITIAL DIMITRI VERSION</span>
<span class="comments">;*</span>
<span class="comments">;* VALIDATION HISTORY:</span>
<span class="comments">;*</span>
<span class="comments">;**************************************************************************************</span>
<span class="comments">;**************************************************************************************</span>

FUNCTION READ_SADE_TXT,SADEFILE,SENSOR

  CASE SENSOR OF
    'AATSR'       : NBANDS=7 
    'MERIS'       : NBANDS=15 
    'MODISA'      : NBANDS=10 
    'PARASOL'     : NBANDS=9 
    'VEGETATION'  : NBANDS=4 
  ENDCASE

  BANDS = INDGEN(NBANDS)
  BAND_STR = STRARR(NBANDS)
  FOR I=0,NBANDS-1 DO BAND_STR[I] = BANDS[I] LE 9 ? '0'+STRTRIM(STRING(BANDS[I]),2) : STRTRIM(STRING(BANDS[I]),2)

  NAMES_REF = MAKE_ARRAY(NBANDS,/STRING,VALUE='RHO')+'_'+BAND_STR
  NAMES_STD = MAKE_ARRAY(NBANDS,/STRING,VALUE='STD')+'_'+BAND_STR
  NAMES_VZA = MAKE_ARRAY(NBANDS,/STRING,VALUE='VZA')+'_'+BAND_STR
  NAMES_VAA = MAKE_ARRAY(NBANDS,/STRING,VALUE='VAA')+'_'+BAND_STR

  FIELDTYPES = [7,7,7,7,MAKE_ARRAY(4*NBANDS,/INTEGER,VALUE=4),3,4,4,4,4,4,4,4,4,7]

  TEMPLATE=CREATE_STRUCT('VERSION', 1.0,$
                        'DATASTART',0,$
                        'DELIMITER', ' ',$  <span class="comments">;IS SPACE DELIMITED</span>
                        'MISSINGVALUE',-999,$
                        'COMMENTSYMBOL','"',$
                        'FIELDCOUNT',N_ELEMENTS(FIELDTYPES),$
                        'FIELDTYPES', FIELDTYPES,$
                        'FIELDNAMES', ['PROCNAME','ACQDATE','PROCDATE','SITE',NAMES_REF,NAMES_STD,NAMES_VZA,NAMES_VAA,'NPIXS','LAT','LON','SZA','SAA','WVAP','OZONE','PRESS','WIND','JPG'],$
                        'FIELDLOCATIONS',FINDGEN(N_ELEMENTS(FIELDTYPES)),$
                        'FIELDGROUPS',FINDGEN(N_ELEMENTS(FIELDTYPES)))

  SADEDATA = READ_ASCII(SADEFILE,TEMPLATE=TEMPLATE)
  RETURN,SADEDATA

END
</code>
    </div>
  </body>
</html>